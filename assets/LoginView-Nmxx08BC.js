import{ac as x,a1 as _,a2 as s,a3 as h,n as o,y as S,ae as k,u as a,a6 as y}from"./vue-vendor-BLj5oUxN.js";import{u as B,a as m}from"./vee-validate-Dn-W1gkU.js";import{c as C,a as i}from"./index.esm-Czkp3GW_.js";import{s as F,t as M,w as N,I as c,i as U}from"./index-Ct63UvUN.js";import{V as q}from"./VContainer-BKDADTkO.js";import{V as P}from"./VRow-BlMyHqYR.js";import{V as d}from"./VCol-DYv38b4a.js";import{V as R}from"./VDivider-BgotosWf.js";import{V as T}from"./VForm-DYeKozmq.js";import"./vuetify-vendor-BJLvFpJU.js";const K={__name:"LoginView",setup($){const{api:p}=N(),V=x(),u=F(),f=M(),g=C({account:i().required("帳號為必填欄位").min(4,"使用者帳號長度不符").max(20,"使用者帳號長度不符"),password:i().required("密碼為必填欄位").min(4,"密碼長度不符").max(20,"密碼長度不符")}),{handleSubmit:b,isSubmitting:w}=B({validationSchema:g}),r=m("account"),l=m("password"),v=b(async n=>{try{const{data:e}=await p.post("/users/login",{account:n.account,password:n.password});f.login(e.result),u({text:"登入成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),V.push("/")}catch(e){console.log(e);const t=e?.response?.data?.message||"發生錯誤，請稍後再試";u({text:t,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}});return(n,e)=>(h(),_(q,null,{default:s(()=>[o(P,{class:"text-center"},{default:s(()=>[o(d,{cols:"12"},{default:s(()=>e[2]||(e[2]=[S("h1",null,"登入",-1)])),_:1,__:[2]}),o(R),o(d,{cols:"12"},{default:s(()=>[o(T,{disabled:a(w),onSubmit:k(a(v),["prevent"])},{default:s(()=>[o(c,{label:"帳號",minlength:"4",maxlength:"20",counter:"",modelValue:a(r).value.value,"onUpdate:modelValue":e[0]||(e[0]=t=>a(r).value.value=t),"error-messages":a(r).errorMessage.value,"prepend-icon":"mdi-account"},null,8,["modelValue","error-messages"]),o(c,{label:"密碼",type:"password",minlength:"4",maxlength:"20",counter:"",modelValue:a(l).value.value,"onUpdate:modelValue":e[1]||(e[1]=t=>a(l).value.value=t),"error-messages":a(l).errorMessage.value,"prepend-icon":"mdi-key"},null,8,["modelValue","error-messages"]),o(U,{type:"submit",color:"#4d4637"},{default:s(()=>e[3]||(e[3]=[y("登入",-1)])),_:1,__:[3]})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};export{K as default};
