import{a as k}from"./index-Mk3cYYfI.js";import{J as f,r as y,k as b,D as V,G as r,a0 as h,F as l,H as s,a8 as w,a9 as c,a5 as u,aq as g,L as d,Q as x,U as A,Z as n,Y as B}from"./vue-vendor-DZ6ShR-l.js";import"./vendor-fvIX-KvJ.js";const L={__name:"OrdersView",setup(C){const{apiAuth:m}=k(),p=f(),i=y([]),_=[{title:"訂單編號",key:"_id"},{title:"日期",key:"createdAt"},{title:"商品",key:"cart",sortable:!1},{title:"金額",key:"price",sortable:!1,value:e=>e.cart.reduce((t,a)=>t+a.quantity*a.book.retailPrice,0)}];return b(async()=>{try{const{data:e}=await m.get("/orders");i.value.push(...e.result)}catch(e){const t=e?.response?.data?.message||"發生錯誤，請稍後再試";p({text:t,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}}),(e,t)=>(l(),V(h,null,{default:r(()=>[s(w,null,{default:r(()=>[s(c,{cols:"12"},{default:r(()=>t[0]||(t[0]=[u("h1",null,"訂單",-1)])),_:1,__:[0]}),s(c,{cols:"12"},{default:r(()=>[s(g,{items:i.value,headers:_},{"item.createdAt":r(({item:a})=>[B(n(new Date(a.createdAt).toLocaleString()),1)]),"item.cart":r(({item:a})=>[u("ul",null,[(l(!0),d(x,null,A(a.cart,o=>(l(),d("li",{key:o._id},n(o.book.title)+" * "+n(o.quantity),1))),128))])]),_:2},1032,["items"])]),_:1})]),_:1})]),_:1}))}};export{L as default};
