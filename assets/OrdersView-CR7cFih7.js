import{s as k,w as V}from"./index-CLsaBFoP.js";import{V as y}from"./VContainer-DLqEUT7d.js";import{V as b}from"./VRow-C5m-Cnrc.js";import{V as c}from"./VCol-HoqbGPYx.js";import{V as h}from"./VDataTable-BG-vFee7.js";import{b as w,H as g,a1 as x,a2 as t,a3 as i,j as o,l as u,a7 as m,F as A,ad as B,Z as s,a6 as d}from"./vue-vendor-DIljl67C.js";import"./vuetify-vendor-CjpGIcAt.js";import"./VList-TZpTG25G.js";import"./VDivider-J5w1HoUO.js";import"./VChip-Cksqm0uA.js";import"./VSelectionControl-BYLK3JUE.js";const H={__name:"OrdersView",setup(C){const{apiAuth:p}=V(),f=k(),n=w([]),_=[{title:"訂單編號",key:"_id"},{title:"用戶",key:"user"},{title:"日期",key:"createdAt"},{title:"商品",key:"cart",sortable:!1},{title:"金額",key:"price",sortable:!1,value:a=>a.cart.reduce((r,e)=>r+e.quantity*e.book.retailPrice,0)}];return g(async()=>{try{const{data:a}=await p.get("/orders/all");n.value.push(...a.result)}catch(a){const r=a?.response?.data?.message||"發生錯誤，請稍後再試";f({text:r,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}}),(a,r)=>(i(),x(y,null,{default:t(()=>[o(b,null,{default:t(()=>[o(c,{cols:"12"},{default:t(()=>r[0]||(r[0]=[u("h1",null,"所有訂單",-1)])),_:1,__:[0]}),o(c,{cols:"12"},{default:t(()=>[o(h,{items:n.value,headers:_},{"item.createdAt":t(({item:e})=>[d(s(new Date(e.createdAt).toLocaleString()),1)]),"item.user":t(({item:e})=>[d(s(e.user?.account||"未知用戶"),1)]),"item.cart":t(({item:e})=>[u("ul",null,[(i(!0),m(A,null,B(e.cart,l=>(i(),m("li",{key:l._id},s(l.book.title)+" * "+s(l.quantity),1))),128))])]),_:2},1032,["items"])]),_:1})]),_:1})]),_:1}))}};export{H as default};
