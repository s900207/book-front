import{b as y,ac as _,a1 as S,a2 as t,a3 as h,j as a,l as k,ae as B,u as o,a6 as C}from"./vue-vendor-DIljl67C.js";import{u as F,a as m}from"./vee-validate-7KorKqsb.js";import{c as q,a as d}from"./index.esm-Czkp3GW_.js";import{s as M,t as N,w as P,J as p,i as U}from"./index-CLsaBFoP.js";import{l as $,o as A,p as E,q as R}from"./icons-BmvWcfYN.js";import{V as T}from"./VContainer-DLqEUT7d.js";import{V as j}from"./VRow-C5m-Cnrc.js";import{V as c}from"./VCol-HoqbGPYx.js";import{V as D}from"./VDivider-J5w1HoUO.js";import{V as I}from"./VForm-Cv1GftZu.js";import"./vuetify-vendor-CjpGIcAt.js";const ee={__name:"LoginView",setup(J){const{api:f}=P(),V=_(),i=M(),g=N(),r=y(!1),v=q({account:d().required("帳號為必填欄位").min(4,"使用者帳號長度不符").max(20,"使用者帳號長度不符"),password:d().required("密碼為必填欄位").min(4,"密碼長度不符").max(20,"密碼長度不符")}),{handleSubmit:b,isSubmitting:w}=F({validationSchema:v}),n=m("account"),l=m("password"),x=b(async u=>{try{const{data:e}=await f.post("/users/login",{account:u.account,password:u.password});g.login(e.result),i({text:"登入成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),V.push("/")}catch(e){console.log(e);const s=e?.response?.data?.message||"發生錯誤，請稍後再試";i({text:s,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}});return(u,e)=>(h(),S(T,null,{default:t(()=>[a(j,{class:"text-center"},{default:t(()=>[a(c,{cols:"12"},{default:t(()=>e[3]||(e[3]=[k("h1",null,"登入",-1)])),_:1,__:[3]}),a(D),a(c,{cols:"12"},{default:t(()=>[a(I,{disabled:o(w),onSubmit:B(o(x),["prevent"])},{default:t(()=>[a(p,{label:"帳號",minlength:"4",maxlength:"20",counter:"",modelValue:o(n).value.value,"onUpdate:modelValue":e[0]||(e[0]=s=>o(n).value.value=s),"error-messages":o(n).errorMessage.value,"prepend-icon":o($)},null,8,["modelValue","error-messages","prepend-icon"]),a(p,{label:"密碼",type:r.value?"text":"password",minlength:"4",maxlength:"20",counter:"",modelValue:o(l).value.value,"onUpdate:modelValue":e[1]||(e[1]=s=>o(l).value.value=s),"error-messages":o(l).errorMessage.value,"prepend-icon":o(R),"append-inner-icon":r.value?o(A):o(E),"onClick:appendInner":e[2]||(e[2]=s=>r.value=!r.value)},null,8,["type","modelValue","error-messages","prepend-icon","append-inner-icon"]),a(U,{type:"submit",color:"#4d4637"},{default:t(()=>e[4]||(e[4]=[C("登入",-1)])),_:1,__:[4]})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};export{ee as default};
