var h=(x,V,n)=>new Promise((i,d)=>{var f=s=>{try{l(n.next(s))}catch(t){d(t)}},b=s=>{try{l(n.throw(s))}catch(t){d(t)}},l=s=>s.done?i(s.value):Promise.resolve(s.value).then(f,b);l((n=n.apply(x,V)).next())});import{J as B,R as S,D as _,G as m,a0 as F,F as M,H as r,a8 as q,a9 as y,a5 as R,ag as U,ah as N,ai as $,u as a,ad as c,a1 as D,Y as E}from"./vue-vendor-CO2Qqhmb.js";import{b as P,e as g,f as T,v as A,u as G,h as v}from"./vendor-oObasS19.js";import{a as H}from"./index-DPzT01pn.js";/* empty css                   */const I={__name:"RegisterView",setup(x){const{api:V}=H(),n=S(),i=B(),d=P({account:g().required("帳號為必填欄位").min(4,"使用者帳號長度不符").max(20,"使用者帳號長度不符"),email:g().required("信箱為必填欄位").test("isEmail","信箱格式錯誤",u=>A.isEmail(u)),password:g().required("密碼為必填欄位").min(4,"密碼長度不符").max(20,"密碼長度不符"),passwordConfirm:g().required("密碼為必填欄位").min(4,"密碼長度不符").max(20,"密碼長度不符").oneOf([T("password")],"密碼不一致")}),{handleSubmit:f,isSubmitting:b}=G({validationSchema:d}),l=v("account"),s=v("email"),t=v("password"),w=v("passwordConfirm"),C=f(u=>h(null,null,function*(){var e,o;try{yield V.post("/users",{account:u.account,email:u.email,password:u.password}),i({text:"註冊成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),n.push("/login")}catch(p){console.log(p);const k=((o=(e=p==null?void 0:p.response)==null?void 0:e.data)==null?void 0:o.message)||"發生錯誤，請稍後再試";i({text:k,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}}));return(u,e)=>(M(),_(F,null,{default:m(()=>[r(q,{class:"text-center"},{default:m(()=>[r(y,{cols:"12"},{default:m(()=>e[4]||(e[4]=[R("h1",null,"註冊",-1)])),_:1,__:[4]}),r(U),r(y,{cols:"12"},{default:m(()=>[r(N,{disabled:a(b),onSubmit:$(a(C),["prevent"])},{default:m(()=>[r(c,{label:"帳號",minlength:"4",maxlength:"20",counter:"",modelValue:a(l).value.value,"onUpdate:modelValue":e[0]||(e[0]=o=>a(l).value.value=o),"error-messages":a(l).errorMessage.value,"prepend-icon":"mdi-account"},null,8,["modelValue","error-messages"]),r(c,{label:"信箱",type:"email",modelValue:a(s).value.value,"onUpdate:modelValue":e[1]||(e[1]=o=>a(s).value.value=o),"error-messages":a(s).errorMessage.value,"prepend-icon":"mdi-email"},null,8,["modelValue","error-messages"]),r(c,{label:"密碼",type:"password",minlength:"4",maxlength:"20",counter:"",modelValue:a(t).value.value,"onUpdate:modelValue":e[2]||(e[2]=o=>a(t).value.value=o),"error-messages":a(t).errorMessage.value,"prepend-icon":"mdi-key"},null,8,["modelValue","error-messages"]),r(c,{label:"確認密碼",type:"password",minlength:"4",maxlength:"20",counter:"",modelValue:a(w).value.value,"onUpdate:modelValue":e[3]||(e[3]=o=>a(w).value.value=o),"error-messages":a(w).errorMessage.value,"prepend-icon":"mdi-key-change"},null,8,["modelValue","error-messages"]),r(D,{type:"submit",color:"#4d4637"},{default:m(()=>e[5]||(e[5]=[E("註冊",-1)])),_:1,__:[5]})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};export{I as default};
