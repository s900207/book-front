var _=(p,c,r)=>new Promise((l,n)=>{var s=t=>{try{e(r.next(t))}catch(u){n(u)}},a=t=>{try{e(r.throw(t))}catch(u){n(u)}},e=t=>t.done?l(t.value):Promise.resolve(t.value).then(s,a);e((r=r.apply(p,c)).next())});import{a as b}from"./index-VDA-datB.js";import{J as V,r as h,k as w,D as g,G as o,a0 as x,F as d,H as i,a8 as A,a9 as k,a5 as f,aq as B,L as y,Q as C,U as D,Z as m,Y as q}from"./vue-vendor-CO2Qqhmb.js";import"./vendor-oObasS19.js";/* empty css                   */const P={__name:"OrdersView",setup(p){const{apiAuth:c}=b(),r=V(),l=h([]),n=[{title:"訂單編號",key:"_id"},{title:"日期",key:"createdAt"},{title:"商品",key:"cart",sortable:!1},{title:"金額",key:"price",sortable:!1,value:s=>s.cart.reduce((a,e)=>a+e.quantity*e.book.retailPrice,0)}];return w(()=>_(null,null,function*(){var s,a;try{const{data:e}=yield c.get("/orders");l.value.push(...e.result)}catch(e){const t=((a=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:a.message)||"發生錯誤，請稍後再試";r({text:t,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}})),(s,a)=>(d(),g(x,null,{default:o(()=>[i(A,null,{default:o(()=>[i(k,{cols:"12"},{default:o(()=>a[0]||(a[0]=[f("h1",null,"訂單",-1)])),_:1,__:[0]}),i(k,{cols:"12"},{default:o(()=>[i(B,{items:l.value,headers:n},{"item.createdAt":o(({item:e})=>[q(m(new Date(e.createdAt).toLocaleString()),1)]),"item.cart":o(({item:e})=>[f("ul",null,[(d(!0),y(C,null,D(e.cart,t=>(d(),y("li",{key:t._id},m(t.book.title)+" * "+m(t.quantity),1))),128))])]),_:2},1032,["items"])]),_:1})]),_:1})]),_:1}))}};export{P as default};
