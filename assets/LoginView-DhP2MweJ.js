import{ac as x,a1 as _,a2 as s,a3 as h,j as a,l as S,ae as B,u as o,a6 as k}from"./vue-vendor-DIljl67C.js";import{u as y,a as i}from"./vee-validate-7KorKqsb.js";import{c as C,a as m}from"./index.esm-Czkp3GW_.js";import{s as F,t as M,w as N,I as c,i as U}from"./index--M2WR1kr.js";import{l as q,o as A}from"./icons-C5frdmYn.js";import{V as P}from"./VContainer-B--mYzB2.js";import{V as R}from"./VRow-D5jAqACE.js";import{V as d}from"./VCol-bB1PHq-U.js";import{V as T}from"./VDivider-5f0YQV19.js";import{V as $}from"./VForm-MCqC4UVC.js";import"./vuetify-vendor-BSJ2BONf.js";const W={__name:"LoginView",setup(j){const{api:p}=N(),f=x(),u=F(),V=M(),g=C({account:m().required("帳號為必填欄位").min(4,"使用者帳號長度不符").max(20,"使用者帳號長度不符"),password:m().required("密碼為必填欄位").min(4,"密碼長度不符").max(20,"密碼長度不符")}),{handleSubmit:b,isSubmitting:w}=y({validationSchema:g}),r=i("account"),l=i("password"),v=b(async n=>{try{const{data:e}=await p.post("/users/login",{account:n.account,password:n.password});V.login(e.result),u({text:"登入成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),f.push("/")}catch(e){console.log(e);const t=e?.response?.data?.message||"發生錯誤，請稍後再試";u({text:t,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}});return(n,e)=>(h(),_(P,null,{default:s(()=>[a(R,{class:"text-center"},{default:s(()=>[a(d,{cols:"12"},{default:s(()=>e[2]||(e[2]=[S("h1",null,"登入",-1)])),_:1,__:[2]}),a(T),a(d,{cols:"12"},{default:s(()=>[a($,{disabled:o(w),onSubmit:B(o(v),["prevent"])},{default:s(()=>[a(c,{label:"帳號",minlength:"4",maxlength:"20",counter:"",modelValue:o(r).value.value,"onUpdate:modelValue":e[0]||(e[0]=t=>o(r).value.value=t),"error-messages":o(r).errorMessage.value,"prepend-icon":o(q)},null,8,["modelValue","error-messages","prepend-icon"]),a(c,{label:"密碼",type:"password",minlength:"4",maxlength:"20",counter:"",modelValue:o(l).value.value,"onUpdate:modelValue":e[1]||(e[1]=t=>o(l).value.value=t),"error-messages":o(l).errorMessage.value,"prepend-icon":o(A)},null,8,["modelValue","error-messages","prepend-icon"]),a(U,{type:"submit",color:"#4d4637"},{default:s(()=>e[3]||(e[3]=[k("登入",-1)])),_:1,__:[3]})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};export{W as default};
