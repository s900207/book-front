import{J as h,R as y,D as C,G as l,a0 as k,F as B,H as s,a8 as S,a9 as g,a5 as _,ag as F,ah as M,ai as q,u as a,ad as t,a1 as R,Y as U}from"./vue-vendor-DZ6ShR-l.js";import{b as N,e as n,f as $,v as D,u as E,h as u}from"./vendor-fvIX-KvJ.js";import{a as P}from"./index-Mk3cYYfI.js";const J={__name:"RegisterView",setup(T){const{api:v}=P(),V=y(),c=h(),f=N({account:n().required("帳號為必填欄位").min(4,"使用者帳號長度不符").max(20,"使用者帳號長度不符"),email:n().required("信箱為必填欄位").test("isEmail","信箱格式錯誤",r=>D.isEmail(r)),password:n().required("密碼為必填欄位").min(4,"密碼長度不符").max(20,"密碼長度不符"),passwordConfirm:n().required("密碼為必填欄位").min(4,"密碼長度不符").max(20,"密碼長度不符").oneOf([$("password")],"密碼不一致")}),{handleSubmit:b,isSubmitting:w}=E({validationSchema:f}),m=u("account"),i=u("email"),d=u("password"),p=u("passwordConfirm"),x=b(async r=>{try{await v.post("/users",{account:r.account,email:r.email,password:r.password}),c({text:"註冊成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),V.push("/login")}catch(e){console.log(e);const o=e?.response?.data?.message||"發生錯誤，請稍後再試";c({text:o,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}});return(r,e)=>(B(),C(k,null,{default:l(()=>[s(S,{class:"text-center"},{default:l(()=>[s(g,{cols:"12"},{default:l(()=>e[4]||(e[4]=[_("h1",null,"註冊",-1)])),_:1,__:[4]}),s(F),s(g,{cols:"12"},{default:l(()=>[s(M,{disabled:a(w),onSubmit:q(a(x),["prevent"])},{default:l(()=>[s(t,{label:"帳號",minlength:"4",maxlength:"20",counter:"",modelValue:a(m).value.value,"onUpdate:modelValue":e[0]||(e[0]=o=>a(m).value.value=o),"error-messages":a(m).errorMessage.value,"prepend-icon":"mdi-account"},null,8,["modelValue","error-messages"]),s(t,{label:"信箱",type:"email",modelValue:a(i).value.value,"onUpdate:modelValue":e[1]||(e[1]=o=>a(i).value.value=o),"error-messages":a(i).errorMessage.value,"prepend-icon":"mdi-email"},null,8,["modelValue","error-messages"]),s(t,{label:"密碼",type:"password",minlength:"4",maxlength:"20",counter:"",modelValue:a(d).value.value,"onUpdate:modelValue":e[2]||(e[2]=o=>a(d).value.value=o),"error-messages":a(d).errorMessage.value,"prepend-icon":"mdi-key"},null,8,["modelValue","error-messages"]),s(t,{label:"確認密碼",type:"password",minlength:"4",maxlength:"20",counter:"",modelValue:a(p).value.value,"onUpdate:modelValue":e[3]||(e[3]=o=>a(p).value.value=o),"error-messages":a(p).errorMessage.value,"prepend-icon":"mdi-key-change"},null,8,["modelValue","error-messages"]),s(R,{type:"submit",color:"#4d4637"},{default:l(()=>e[5]||(e[5]=[U("註冊",-1)])),_:1,__:[5]})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};export{J as default};
