var p=(m,i,r)=>new Promise((l,c)=>{var a=t=>{try{e(r.next(t))}catch(u){c(u)}},s=t=>{try{e(r.throw(t))}catch(u){c(u)}},e=t=>t.done?l(t.value):Promise.resolve(t.value).then(a,s);e((r=r.apply(m,i)).next())});import{a as y}from"./index-79ded718.js";import{O as b,r as V,k as w,G as g,H as o,a2 as x,F as d,I as n,ac as k,aw as A,a0 as B,a8 as _,M as h,K as f,Y as C,W as v,ab as D}from"./vue-vendor-5ccff89c.js";import"./vendor-1de8772a.js";const N=h("h1",null,"訂單",-1),M={__name:"OrdersView",setup(m){const{apiAuth:i}=y(),r=b(),l=V([]),c=[{title:"訂單編號",key:"_id"},{title:"日期",key:"createdAt"},{title:"商品",key:"cart",sortable:!1},{title:"金額",key:"price",sortable:!1,value:a=>a.cart.reduce((s,e)=>s+e.quantity*e.book.retailPrice,0)}];return w(()=>p(this,null,function*(){var a,s;try{const{data:e}=yield i.get("/orders");l.value.push(...e.result)}catch(e){const t=((s=(a=e==null?void 0:e.response)==null?void 0:a.data)==null?void 0:s.message)||"發生錯誤，請稍後再試";r({text:t,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}})),(a,s)=>(d(),g(x,null,{default:o(()=>[n(D,null,{default:o(()=>[n(k,{cols:"12"},{default:o(()=>[N]),_:1}),n(k,{cols:"12"},{default:o(()=>[n(A,{items:l.value,headers:c},{"item.createdAt":o(({item:e})=>[B(_(new Date(e.createdAt).toLocaleString()),1)]),"item.cart":o(({item:e})=>[h("ul",null,[(d(!0),f(v,null,C(e.cart,t=>(d(),f("li",{key:t._id},_(t.book.title)+" * "+_(t.quantity),1))),128))])]),_:2},1032,["items"])]),_:1})]),_:1})]),_:1}))}};export{M as default};
