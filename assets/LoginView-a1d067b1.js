import{U as x,W as S,Z as k,_ as r,ac as B,a1 as y,a3 as C,c as e,a5 as a,av as F,as as m,a8 as U,a7 as M,aa as N}from"./index-acf5088e.js";import{u as q,a as i}from"./vee-validate.esm-bd42d6f7.js";import{c as P,a as d}from"./index.esm-3d8b24aa.js";import{V as R}from"./VContainer-49573c54.js";import{V as p}from"./VCol-051f345b.js";import{V as T}from"./VDivider-ddc90f74.js";import{V as $}from"./VForm-912a9ddf.js";import{V as A}from"./VRow-bab3d1fe.js";const D=N("h1",null,"登入",-1),J={__name:"LoginView",setup(L){const{api:V}=B(),f=y(),c=x(),g=S(),b=P({account:d().required("帳號為必填欄位").min(4,"使用者帳號長度不符").max(20,"使用者帳號長度不符"),password:d().required("密碼為必填欄位").min(4,"密碼長度不符").max(20,"密碼長度不符")}),{handleSubmit:v,isSubmitting:w}=q({validationSchema:b}),l=i("account"),n=i("password"),_=v(async u=>{var o,s;try{const{data:t}=await V.post("/users/login",{account:u.account,password:u.password});g.login(t.result),c({text:"登入成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),f.push("/")}catch(t){console.log(t);const h=((s=(o=t==null?void 0:t.response)==null?void 0:o.data)==null?void 0:s.message)||"發生錯誤，請稍後再試";c({text:h,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}});return(u,o)=>(C(),k(R,null,{default:r(()=>[e(A,{class:"text-center"},{default:r(()=>[e(p,{cols:"12"},{default:r(()=>[D]),_:1}),e(T),e(p,{cols:"12"},{default:r(()=>[e($,{disabled:a(w),onSubmit:F(a(_),["prevent"])},{default:r(()=>[e(m,{label:"帳號",minlength:"4",maxlength:"20",counter:"",modelValue:a(l).value.value,"onUpdate:modelValue":o[0]||(o[0]=s=>a(l).value.value=s),"error-messages":a(l).errorMessage.value,"prepend-icon":"mdi-account"},null,8,["modelValue","error-messages"]),e(m,{label:"密碼",type:"password",minlength:"4",maxlength:"20",counter:"",modelValue:a(n).value.value,"onUpdate:modelValue":o[1]||(o[1]=s=>a(n).value.value=s),"error-messages":a(n).errorMessage.value,"prepend-icon":"mdi-key"},null,8,["modelValue","error-messages"]),e(U,{type:"submit",color:"#4d4637"},{default:r(()=>[M("登入")]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};export{J as default};
