import{p as P,m as Y,a as z,g as A,u as R,c as o,b as ne,d as se,e as K,f as Q,h as Z,t as N,i as re,j as ie,k as ee,l as ue,n as ce,s as T,o as f,q as de,V as ve,r as M,v as E,w as ge,x as X,y as me,z as H,A as fe,B as be,C as he,D as ye,E as Ve,F as xe,G as F,H as _e,I as ke,J as Se,K as Be,L as Te,M as Ie,N as Ce,O as we,P as pe,Q as Le,R as Ne,S as Pe,T as Ae,_ as Re,U as Ee,W as He,X as De,Y as w,Z as x,$ as i,a0 as k,a1 as p,a2 as $e,a3 as Fe,a4 as m,a5 as q,a6 as D,a7 as L,a8 as U,a9 as $,aa as Me,ab as O,ac as te,ad as Ue,ae as Ye,af as ze}from"./index-e4f741c7.js";import{V as Xe,a as qe}from"./VNavigationDrawer-68a70fa7.js";import{u as Oe,V as W,a as j,b as We}from"./VList-064163af.js";import{V as je}from"./VContainer-cdf2533d.js";import"./VDivider-b3842434.js";const ae=P({text:String,...Y(),...z()},"VToolbarTitle"),oe=A()({name:"VToolbarTitle",props:ae(),setup(e,d){let{slots:t}=d;return R(()=>{const v=!!(t.default||t.text||e.text);return o(e.tag,{class:["v-toolbar-title",e.class],style:e.style},{default:()=>{var l;return[v&&o("div",{class:"v-toolbar-title__placeholder"},[t.text?t.text():e.text,(l=t.default)==null?void 0:l.call(t)])]}})}),{}}}),Ge=[null,"prominent","default","comfortable","compact"],le=P({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>Ge.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...ne(),...Y(),...se(),...K(),...z({tag:"header"}),...Q()},"VToolbar"),G=A()({name:"VToolbar",props:le(),setup(e,d){var a;let{slots:t}=d;const{backgroundColorClasses:v,backgroundColorStyles:l}=Z(N(e,"color")),{borderClasses:n}=re(e),{elevationClasses:b}=ie(e),{roundedClasses:g}=ee(e),{themeClasses:h}=ue(e),{rtlClasses:y}=ce(),s=T(!!(e.extended||(a=t.extension)!=null&&a.call(t))),u=f(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),c=f(()=>s.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return de({VBtn:{variant:"text"}}),R(()=>{var r;const V=!!(e.title||t.title),_=!!(t.image||e.image),S=(r=t.extension)==null?void 0:r.call(t);return s.value=!!(e.extended||S),o(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},v.value,n.value,b.value,g.value,h.value,y.value,e.class],style:[l.value,e.style]},{default:()=>[_&&o("div",{key:"image",class:"v-toolbar__image"},[t.image?o(M,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},t.image):o(ve,{key:"image-img",cover:!0,src:e.image},null)]),o(M,{defaults:{VTabs:{height:E(u.value)}}},{default:()=>{var B,I,C;return[o("div",{class:"v-toolbar__content",style:{height:E(u.value)}},[t.prepend&&o("div",{class:"v-toolbar__prepend"},[(B=t.prepend)==null?void 0:B.call(t)]),V&&o(oe,{key:"title",text:e.title},{text:t.title}),(I=t.default)==null?void 0:I.call(t),t.append&&o("div",{class:"v-toolbar__append"},[(C=t.append)==null?void 0:C.call(t)])])]}}),o(M,{defaults:{VTabs:{height:E(c.value)}}},{default:()=>[o(ge,null,{default:()=>[s.value&&o("div",{class:"v-toolbar__extension",style:{height:E(c.value)}},[S])]})]})]})}),{contentHeight:u,extensionHeight:c}}}),Je=P({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Ke(e){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:t}=d;let v=0;const l=X(null),n=T(0),b=T(0),g=T(0),h=T(!1),y=T(!1),s=f(()=>Number(e.scrollThreshold)),u=f(()=>me((s.value-n.value)/s.value||0)),c=()=>{const a=l.value;!a||t&&!t.value||(v=n.value,n.value="window"in a?a.pageYOffset:a.scrollTop,y.value=n.value<v,g.value=Math.abs(n.value-s.value))};return H(y,()=>{b.value=b.value||n.value}),H(h,()=>{b.value=0}),fe(()=>{H(()=>e.scrollTarget,a=>{var _;const V=a?document.querySelector(a):window;V&&V!==l.value&&((_=l.value)==null||_.removeEventListener("scroll",c),l.value=V,l.value.addEventListener("scroll",c,{passive:!0}))},{immediate:!0})}),be(()=>{var a;(a=l.value)==null||a.removeEventListener("scroll",c)}),t&&H(t,c,{immediate:!0}),{scrollThreshold:s,currentScroll:n,currentThreshold:g,isScrollActive:h,scrollRatio:u,isScrollingUp:y,savedScroll:b}}const Qe=P({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...le(),...he(),...Je(),height:{type:[Number,String],default:64}},"VAppBar"),Ze=A()({name:"VAppBar",props:Qe(),emits:{"update:modelValue":e=>!0},setup(e,d){let{slots:t}=d;const v=X(),l=ye(e,"modelValue"),n=f(()=>{var B;const r=new Set(((B=e.scrollBehavior)==null?void 0:B.split(" "))??[]);return{hide:r.has("hide"),inverted:r.has("inverted"),collapse:r.has("collapse"),elevate:r.has("elevate"),fadeImage:r.has("fade-image")}}),b=f(()=>{const r=n.value;return r.hide||r.inverted||r.collapse||r.elevate||r.fadeImage||!l.value}),{currentScroll:g,scrollThreshold:h,isScrollingUp:y,scrollRatio:s}=Ke(e,{canScroll:b}),u=f(()=>e.collapse||n.value.collapse&&(n.value.inverted?s.value>0:s.value===0)),c=f(()=>e.flat||n.value.elevate&&(n.value.inverted?g.value>0:g.value===0)),a=f(()=>n.value.fadeImage?n.value.inverted?1-s.value:s.value:void 0),V=f(()=>{var I,C;if(n.value.hide&&n.value.inverted)return 0;const r=((I=v.value)==null?void 0:I.contentHeight)??0,B=((C=v.value)==null?void 0:C.extensionHeight)??0;return r+B});Ve(f(()=>!!e.scrollBehavior),()=>{_e(()=>{n.value.hide?n.value.inverted?l.value=g.value>h.value:l.value=y.value||g.value<h.value:l.value=!0})});const{ssrBootStyles:_}=Oe(),{layoutItemStyles:S}=xe({id:e.name,order:f(()=>parseInt(e.order,10)),position:N(e,"location"),layoutSize:V,elementSize:T(void 0),active:l,absolute:N(e,"absolute")});return R(()=>{const r=G.filterProps(e);return o(G,F({ref:v,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...S.value,"--v-toolbar-image-opacity":a.value,height:void 0,..._.value},e.style]},r,{collapse:u.value,flat:c.value}),t)}),{}}}),et=A()({name:"VAppBarTitle",props:ae(),setup(e,d){let{slots:t}=d;return R(()=>o(oe,F(e,{class:"v-app-bar-title"}),t)),{}}});const tt=P({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:ke,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...Y(),...Se({location:"top end"}),...K(),...z(),...Q(),...Be({transition:"scale-rotate-transition"})},"VBadge"),J=A()({name:"VBadge",inheritAttrs:!1,props:tt(),setup(e,d){const{backgroundColorClasses:t,backgroundColorStyles:v}=Z(N(e,"color")),{roundedClasses:l}=ee(e),{t:n}=Te(),{textColorClasses:b,textColorStyles:g}=Ie(N(e,"textColor")),{themeClasses:h}=Ce(),{locationStyles:y}=we(e,!0,s=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(s)?+(e.offsetY??0):["left","right"].includes(s)?+(e.offsetX??0):0));return R(()=>{const s=Number(e.content),u=!e.max||isNaN(s)?e.content:s<=+e.max?s:`${e.max}+`,[c,a]=pe(d.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return o(e.tag,F({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},a,{style:e.style}),{default:()=>{var V,_;return[o("div",{class:"v-badge__wrapper"},[(_=(V=d.slots).default)==null?void 0:_.call(V),o(Le,{transition:e.transition},{default:()=>{var S,r;return[Ne(o("span",F({class:["v-badge__badge",h.value,t.value,l.value,b.value],style:[v.value,g.value,e.inline?{}:y.value],"aria-atomic":"true","aria-label":n(e.label,s),"aria-live":"polite",role:"status"},c),[e.dot?void 0:d.slots.badge?(r=(S=d.slots).badge)==null?void 0:r.call(S):e.icon?o(Ae,{icon:e.icon},null):u]),[[Pe,e.modelValue]])]}})])]}})}),{}}});const at=e=>(Ye("data-v-deb6d8ae"),e=e(),ze(),e),ot=at(()=>te("span",null,"登出",-1)),lt={__name:"FrontLayout",setup(e){const{apiAuth:d}=Ue(),t=$e(),v=Ee(),l=He(),{mobile:n}=De(),b=f(()=>n.value),g=X(!1),h=f(()=>[{to:"/mybook",text:"我的書籍",svgIcon:"#icon-book-account",show:l.isLogin},{to:"/article",text:"文章",svgIcon:"#icon-book",show:!1},{to:"/admin",text:"管理員管理",svgIcon:"#icon-cog",show:l.isLogin&&l.isAdmin},{to:"/cart",text:"購物車",svgIcon:"#icon-cart",show:!0},{to:"/orders",text:"訂單",svgIcon:"#icon-list-box",show:l.isLogin},{to:"/register",text:"註冊",svgIcon:"#icon-account-plus",show:!l.isLogin},{to:"/login",text:"登入",svgIcon:"#icon-login",show:!l.isLogin}]),y=async()=>{var s,u;try{await d.delete("/users/logout"),l.logout(),v({text:"登出成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),t.push("/")}catch(c){const a=((u=(s=c==null?void 0:c.response)==null?void 0:s.data)==null?void 0:u.message)||"發生錯誤，請稍後再試";v({text:a,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}};return(s,u)=>{const c=Fe("RouterView");return m(),w(p,null,[b.value?(m(),x(Xe,{key:0,modelValue:g.value,"onUpdate:modelValue":u[0]||(u[0]=a=>g.value=a),temporary:"",location:"right",style:{"background-color":"#4d4637",color:"#f6eee0","margin-top":"64px"}},{default:i(()=>[o(We,{nav:""},{default:i(()=>[(m(!0),w(p,null,q(h.value,a=>(m(),w(p,{key:a.to},[a.show?(m(),x(W,{key:0,class:"nav-item",to:a.to},{prepend:i(()=>[a.svgIcon?(m(),x(L,{key:0,class:"nav-icon",href:a.svgIcon},null,8,["href"])):k("",!0)]),append:i(()=>[a.to==="/cart"?(m(),x(J,{key:0,color:"error",content:D(l).cart,inline:""},null,8,["content"])):k("",!0)]),default:i(()=>[o(j,null,{default:i(()=>[U(O(a.text),1)]),_:2},1024)]),_:2},1032,["to"])):k("",!0)],64))),128)),D(l).isLogin?(m(),x(W,{key:0,class:"nav-item",onClick:y},{prepend:i(()=>[o(L,{class:"nav-icon",href:"#icon-logout"})]),default:i(()=>[o(j,null,{default:i(()=>[U("登出")]),_:1})]),_:1})):k("",!0)]),_:1})]),_:1},8,["modelValue"])):k("",!0),o(Ze,{color:"#4d4637"},{default:i(()=>[o(je,{class:"d-flex align-center"},{default:i(()=>[o($,{to:"/",active:!1},{default:i(()=>[o(et,{class:"text-h5"},{default:i(()=>[U("書評網")]),_:1})]),_:1}),o(Me),b.value?(m(),x($,{key:0,onClick:u[1]||(u[1]=a=>g.value=!0)},{default:i(()=>[o(L,{class:"nav-icon",href:"#icon-menu"})]),_:1})):(m(!0),w(p,{key:1},q(h.value,a=>(m(),w(p,{key:a.to},[a.show?(m(),x($,{key:0,class:"nav-item",to:a.to},{prepend:i(()=>[a.svgIcon?(m(),x(L,{key:0,class:"nav-icon",href:a.svgIcon},null,8,["href"])):k("",!0)]),default:i(()=>[te("span",null,O(a.text),1),a.to==="/cart"?(m(),x(J,{key:0,color:"error",content:D(l).cart,floating:""},null,8,["content"])):k("",!0)]),_:2},1032,["to"])):k("",!0),D(l).isLogin?(m(),x($,{key:1,class:"nav-item",onClick:y},{prepend:i(()=>[o(L,{class:"nav-icon",href:"#icon-logout"})]),default:i(()=>[ot]),_:1})):k("",!0)],64))),128))]),_:1})]),_:1}),o(qe,{style:{"background-color":"#f6eee0"}},{default:i(()=>[o(c)]),_:1})],64)}}},ct=Re(lt,[["__scopeId","data-v-deb6d8ae"]]);export{ct as default};
