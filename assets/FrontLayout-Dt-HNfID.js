import{m as U,a as O,b as se,c as re,u as Z,d as ie,e as ue,f as G,V as ce,g as E,h as de,i as R,j as ve,k as me,l as ge,n as fe,o as be,p as he,q as ye,M as Ve,r as M,s as ke,t as xe,v as Se,w as Be}from"./index-CMCGl2Or.js";import{j as n,P as J,n as Q,l as S,s as T,e as h,b as F,o as A,H as Te,A as Ce,t as D,w as _e,m as I,U as we,V as pe,a7 as C,a1 as x,a8 as B,a2 as v,F as _,ac as Ne,aa as Pe,a3 as f,ad as q,a6 as P,Z as Y,u as L}from"./vue-vendor-DIljl67C.js";import{m as Le,a as Ie,b as Ae,c as He,d as Re,e as Ee,f as De,g as Me}from"./icons-BFoqPsYi.js";import{p as w,g as p,a as $,f as N,m as ee,d as Ue,u as Fe,l as $e,q as H,M as ze,C as qe,U as Ye,ak as je,al as We,R as Xe,H as Ke,am as Oe,K as Ze,ab as Ge}from"./vuetify-vendor-BSJ2BONf.js";import{V as Je,a as Qe}from"./VNavigationDrawer-CKh5OKgg.js";import{u as et,V as tt,a as j,b as W}from"./VList-M0qda9_D.js";import{V as at}from"./VContainer-BpspjPie.js";import"./VDivider-BGXdOhCk.js";const te=w({text:String,...$(),...U()},"VToolbarTitle"),ae=p()({name:"VToolbarTitle",props:te(),setup(e,i){let{slots:t}=i;return N(()=>{const m=!!(t.default||t.text||e.text);return n(e.tag,{class:Q(["v-toolbar-title",e.class]),style:J(e.style)},{default:()=>[m&&S("div",{class:"v-toolbar-title__placeholder"},[t.text?t.text():e.text,t.default?.()])]})}),{}}}),lt=[null,"prominent","default","comfortable","compact"],le=w({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>lt.includes(e)},extended:{type:Boolean,default:null},extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...re(),...$(),...se(),...O(),...U({tag:"header"}),...ee()},"VToolbar"),X=p()({name:"VToolbar",props:le(),setup(e,i){let{slots:t}=i;const{backgroundColorClasses:m,backgroundColorStyles:s}=Z(()=>e.color),{borderClasses:l}=ie(e),{elevationClasses:d}=ue(e),{roundedClasses:u}=G(e),{themeClasses:b}=Ue(e),{rtlClasses:V}=Fe(),c=T(e.extended===null?!!t.extension?.():e.extended),a=h(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),y=h(()=>c.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return $e({VBtn:{variant:"text"}}),N(()=>{const o=!!(e.title||t.title),g=!!(t.image||e.image),k=t.extension?.();return c.value=e.extended===null?!!k:e.extended,n(e.tag,{class:Q(["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},m.value,l.value,d.value,u.value,b.value,V.value,e.class]),style:J([s.value,e.style])},{default:()=>[g&&S("div",{key:"image",class:"v-toolbar__image"},[t.image?n(E,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},t.image):n(ce,{key:"image-img",cover:!0,src:e.image},null)]),n(E,{defaults:{VTabs:{height:H(a.value)}}},{default:()=>[S("div",{class:"v-toolbar__content",style:{height:H(a.value)}},[t.prepend&&S("div",{class:"v-toolbar__prepend"},[t.prepend?.()]),o&&n(ae,{key:"title",text:e.title},{text:t.title}),t.default?.(),t.append&&S("div",{class:"v-toolbar__append"},[t.append?.()])])]}),n(E,{defaults:{VTabs:{height:H(y.value)}}},{default:()=>[n(de,null,{default:()=>[c.value&&S("div",{class:"v-toolbar__extension",style:{height:H(y.value)}},[k])]})]})]})}),{contentHeight:a,extensionHeight:y}}}),ot=w({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function nt(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:t}=i;let m=0,s=0;const l=F(null),d=T(0),u=T(0),b=T(0),V=T(!1),c=T(!1),a=h(()=>Number(e.scrollThreshold)),y=h(()=>ze((a.value-d.value)/a.value||0)),o=()=>{const g=l.value;if(!g||t&&!t.value)return;m=d.value,d.value="window"in g?g.pageYOffset:g.scrollTop;const k=g instanceof Window?document.documentElement.scrollHeight:g.scrollHeight;if(s!==k){s=k;return}c.value=d.value<m,b.value=Math.abs(d.value-a.value)};return A(c,()=>{u.value=u.value||d.value}),A(V,()=>{u.value=0}),Te(()=>{A(()=>e.scrollTarget,g=>{const k=g?document.querySelector(g):window;k&&k!==l.value&&(l.value?.removeEventListener("scroll",o),l.value=k,l.value.addEventListener("scroll",o,{passive:!0}))},{immediate:!0})}),Ce(()=>{l.value?.removeEventListener("scroll",o)}),t&&A(t,o,{immediate:!0}),{scrollThreshold:a,currentScroll:d,currentThreshold:b,isScrollActive:V,scrollRatio:y,isScrollingUp:c,savedScroll:u}}const st=w({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...le(),...We(),...ot(),height:{type:[Number,String],default:64}},"VAppBar"),rt=p()({name:"VAppBar",props:st(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:t}=i;const m=F(),s=qe(e,"modelValue"),l=h(()=>{const r=new Set(e.scrollBehavior?.split(" ")??[]);return{hide:r.has("hide"),fullyHide:r.has("fully-hide"),inverted:r.has("inverted"),collapse:r.has("collapse"),elevate:r.has("elevate"),fadeImage:r.has("fade-image")}}),d=h(()=>{const r=l.value;return r.hide||r.fullyHide||r.inverted||r.collapse||r.elevate||r.fadeImage||!s.value}),{currentScroll:u,scrollThreshold:b,isScrollingUp:V,scrollRatio:c}=nt(e,{canScroll:d}),a=D(()=>l.value.hide||l.value.fullyHide),y=h(()=>e.collapse||l.value.collapse&&(l.value.inverted?c.value>0:c.value===0)),o=h(()=>e.flat||l.value.fullyHide&&!s.value||l.value.elevate&&(l.value.inverted?u.value>0:u.value===0)),g=h(()=>l.value.fadeImage?l.value.inverted?1-c.value:c.value:void 0),k=h(()=>{if(l.value.hide&&l.value.inverted)return 0;const r=m.value?.contentHeight??0,z=m.value?.extensionHeight??0;return a.value?u.value<b.value||l.value.fullyHide?r+z:r:r+z});Ye(()=>!!e.scrollBehavior,()=>{_e(()=>{a.value?l.value.inverted?s.value=u.value>b.value:s.value=V.value||u.value<b.value:s.value=!0})});const{ssrBootStyles:oe}=et(),{layoutItemStyles:ne}=je({id:e.name,order:h(()=>parseInt(e.order,10)),position:D(()=>e.location),layoutSize:k,elementSize:T(void 0),active:s,absolute:D(()=>e.absolute)});return N(()=>{const r=X.filterProps(e);return n(X,I({ref:m,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...ne.value,"--v-toolbar-image-opacity":g.value,height:void 0,...oe.value},e.style]},r,{collapse:y.value,flat:o.value}),t)}),{}}}),it=w({...ve({icon:"$menu",variant:"text"})},"VAppBarNavIcon"),ut=p()({name:"VAppBarNavIcon",props:it(),setup(e,i){let{slots:t}=i;return N(()=>n(R,I(e,{class:["v-app-bar-nav-icon"]}),t)),{}}}),ct=p()({name:"VAppBarTitle",props:te(),setup(e,i){let{slots:t}=i;return N(()=>n(ae,I(e,{class:"v-app-bar-title"}),t)),{}}}),dt=w({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:Ze,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...$(),...ye({location:"top end"}),...O(),...U(),...ee(),...he({transition:"scale-rotate-transition"}),...be()},"VBadge"),K=p()({name:"VBadge",inheritAttrs:!1,props:dt(),setup(e,i){const{backgroundColorClasses:t,backgroundColorStyles:m}=Z(()=>e.color),{roundedClasses:s}=G(e),{t:l}=Xe(),{textColorClasses:d,textColorStyles:u}=me(()=>e.textColor),{themeClasses:b}=Ke(),{locationStyles:V}=ge(e,!0,a=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(a)?Number(e.offsetY??0):["left","right"].includes(a)?Number(e.offsetX??0):0)),{dimensionStyles:c}=fe(e);return N(()=>{const a=Number(e.content),y=!e.max||isNaN(a)?e.content:a<=Number(e.max)?a:`${e.max}+`,[o,g]=Oe(i.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return n(e.tag,I({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},g,{style:e.style}),{default:()=>[S("div",{class:"v-badge__wrapper"},[i.slots.default?.(),n(Ve,{transition:e.transition},{default:()=>[we(S("span",I({class:["v-badge__badge",b.value,t.value,s.value,d.value],style:[m.value,u.value,c.value,e.inline?{}:V.value],"aria-atomic":"true","aria-label":l(e.label,a),"aria-live":"polite",role:"status"},o),[e.dot?void 0:i.slots.badge?i.slots.badge?.():e.icon?n(M,{icon:e.icon},null):y]),[[pe,e.modelValue]])]})])]})}),{}}}),kt={__name:"FrontLayout",setup(e){const{apiAuth:i}=Be(),t=Ne(),m=ke(),s=xe(),{mobile:l}=Ge(),d=h(()=>l.value),u=F(!1),b=h(()=>[{to:"/mybook",text:"我的最愛書籍",icon:Le,show:s.isLogin},{to:"/article",text:"文章",icon:Ie,show:!1},{to:"/admin",text:"管理員管理",icon:Ae,show:s.isLogin&&s.isAdmin},{to:"/cart",text:"購物車",icon:He,show:!0},{to:"/orders",text:"訂單",icon:Re,show:s.isLogin},{to:"/register",text:"註冊",icon:Ee,show:!s.isLogin},{to:"/login",text:"登入",icon:De,show:!s.isLogin}]),V=async()=>{try{await i.delete("/users/logout"),s.logout(),m({text:"登出成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),t.push("/")}catch(c){const a=c?.response?.data?.message||"發生錯誤，請稍後再試";m({text:a,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}};return(c,a)=>{const y=Pe("RouterView");return f(),C(_,null,[d.value?(f(),x(Je,{key:0,modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=o=>u.value=o),temporary:"",location:"right",style:{"background-color":"#4d4637",color:"#f6eee0","margin-top":"64px"}},{default:v(()=>[n(tt,{nav:""},{default:v(()=>[(f(!0),C(_,null,q(b.value,o=>(f(),C(_,{key:o.to},[o.show?(f(),x(j,{key:0,to:o.to},{prepend:v(()=>[n(M,{icon:o.icon},null,8,["icon"])]),append:v(()=>[o.to==="/cart"?(f(),x(K,{key:0,color:"error",content:L(s).cart,inline:""},null,8,["content"])):B("",!0)]),default:v(()=>[n(W,null,{default:v(()=>[P(Y(o.text),1)]),_:2},1024)]),_:2},1032,["to"])):B("",!0)],64))),128)),L(s).isLogin?(f(),x(j,{key:0,onClick:V},{prepend:v(()=>[n(M,{icon:"mdi-logout"})]),default:v(()=>[n(W,null,{default:v(()=>a[2]||(a[2]=[P("登出",-1)])),_:1,__:[2]})]),_:1})):B("",!0)]),_:1})]),_:1},8,["modelValue"])):B("",!0),n(rt,{color:"#4d4637"},{default:v(()=>[n(at,{class:"d-flex align-center"},{default:v(()=>[n(R,{to:"/",active:!1},{default:v(()=>[n(ct,{class:"text-h5"},{default:v(()=>a[3]||(a[3]=[P("書評網",-1)])),_:1,__:[3]})]),_:1}),n(Se),d.value?(f(),x(ut,{key:0,onClick:a[1]||(a[1]=o=>u.value=!0)})):(f(),C(_,{key:1},[(f(!0),C(_,null,q(b.value,o=>(f(),C(_,{key:o.to},[o.show?(f(),x(R,{key:0,to:o.to,"prepend-icon":o.icon},{default:v(()=>[P(Y(o.text),1),o.to==="/cart"?(f(),x(K,{key:0,color:"error",content:L(s).cart,floating:""},null,8,["content"])):B("",!0)]),_:2},1032,["to","prepend-icon"])):B("",!0)],64))),128)),L(s).isLogin?(f(),x(R,{key:0,"prepend-icon":L(Me),onClick:V},{default:v(()=>a[4]||(a[4]=[P("登出",-1)])),_:1,__:[4]},8,["prepend-icon"])):B("",!0)],64))]),_:1})]),_:1}),n(Qe,{style:{"background-color":"#f6eee0"}},{default:v(()=>[n(y)]),_:1})],64)}}};export{kt as default};
