var L=(b,_,c)=>new Promise((k,e)=>{var x=r=>{try{u(c.next(r))}catch(d){e(d)}},V=r=>{try{u(c.throw(r))}catch(d){e(d)}},u=r=>r.done?k(r.value):Promise.resolve(r.value).then(x,V);u((c=c.apply(b,_)).next())});import{u as R,a as S}from"./index-BOcPIx1O.js";import{J as T,K as F,d as B,r as M,L as p,D as l,M as i,H as s,G as t,N as P,O as U,P as E,Q as m,R as $,E as G,F as a,T as H,U as C,W as h,X as A,Y as g,Z as N,_ as I,u as y,$ as D,a0 as J,a1 as v,a2 as K,a3 as O,a4 as Q}from"./vue-vendor-CO2Qqhmb.js";import"./vendor-oObasS19.js";/* empty css                   */const q={__name:"FrontLayout",setup(b){const{apiAuth:_}=S(),c=$(),k=T(),e=R(),{mobile:x}=F(),V=B(()=>x.value),u=M(!1),r=B(()=>[{to:"/mybook",text:"我的最愛書籍",icon:"mdi-book-account",show:e.isLogin},{to:"/article",text:"文章",icon:"mdi-book",show:!1},{to:"/admin",text:"管理員管理",icon:"mdi-cog",show:e.isLogin&&e.isAdmin},{to:"/cart",text:"購物車",icon:"mdi-cart",show:!0},{to:"/orders",text:"訂單",icon:"mdi-list-box",show:e.isLogin},{to:"/register",text:"註冊",icon:"mdi-account-plus",show:!e.isLogin},{to:"/login",text:"登入",icon:"mdi-login",show:!e.isLogin}]),d=()=>L(null,null,function*(){var w,n;try{yield _.delete("/users/logout"),e.logout(),k({text:"登出成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),c.push("/")}catch(f){const o=((n=(w=f==null?void 0:f.response)==null?void 0:w.data)==null?void 0:n.message)||"發生錯誤，請稍後再試";k({text:o,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}});return(w,n)=>{const f=G("RouterView");return a(),p(m,null,[V.value?(a(),l(P,{key:0,modelValue:u.value,"onUpdate:modelValue":n[0]||(n[0]=o=>u.value=o),temporary:"",location:"right",style:{"background-color":"#4d4637",color:"#f6eee0","margin-top":"64px"}},{default:t(()=>[s(H,{nav:""},{default:t(()=>[(a(!0),p(m,null,C(r.value,o=>(a(),p(m,{key:o.to},[o.show?(a(),l(h,{key:0,to:o.to},{prepend:t(()=>[s(D,{icon:o.icon},null,8,["icon"])]),append:t(()=>[o.to==="/cart"?(a(),l(I,{key:0,color:"error",content:y(e).cart,inline:""},null,8,["content"])):i("",!0)]),default:t(()=>[s(A,null,{default:t(()=>[g(N(o.text),1)]),_:2},1024)]),_:2},1032,["to"])):i("",!0)],64))),128)),y(e).isLogin?(a(),l(h,{key:0,onClick:d},{prepend:t(()=>[s(D,{icon:"mdi-logout"})]),default:t(()=>[s(A,null,{default:t(()=>n[2]||(n[2]=[g("登出",-1)])),_:1,__:[2]})]),_:1})):i("",!0)]),_:1})]),_:1},8,["modelValue"])):i("",!0),s(U,{color:"#4d4637"},{default:t(()=>[s(J,{class:"d-flex align-center"},{default:t(()=>[s(v,{to:"/",active:!1},{default:t(()=>[s(K,{class:"text-h5"},{default:t(()=>n[3]||(n[3]=[g("書評網",-1)])),_:1,__:[3]})]),_:1}),s(O),V.value?(a(),l(Q,{key:0,onClick:n[1]||(n[1]=o=>u.value=!0)})):(a(),p(m,{key:1},[(a(!0),p(m,null,C(r.value,o=>(a(),p(m,{key:o.to},[o.show?(a(),l(v,{key:0,to:o.to,"prepend-icon":o.icon},{default:t(()=>[g(N(o.text),1),o.to==="/cart"?(a(),l(I,{key:0,color:"error",content:y(e).cart,floating:""},null,8,["content"])):i("",!0)]),_:2},1032,["to","prepend-icon"])):i("",!0)],64))),128)),y(e).isLogin?(a(),l(v,{key:0,"prepend-icon":"mdi-logout",onClick:d},{default:t(()=>n[4]||(n[4]=[g("登出",-1)])),_:1,__:[4]})):i("",!0)],64))]),_:1})]),_:1}),s(E,{style:{"background-color":"#f6eee0"}},{default:t(()=>[s(f)]),_:1})],64)}}};export{q as default};
