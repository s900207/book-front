import{s as _,w as k}from"./index-Ct63UvUN.js";import{V}from"./VContainer-BKDADTkO.js";import{V as y}from"./VRow-BlMyHqYR.js";import{V as c}from"./VCol-DYv38b4a.js";import{V as b}from"./VDataTable-CjOpyrRt.js";import{d as h,H as w,a1 as g,a2 as r,a3 as l,n as o,y as u,a7 as m,F as x,ad as A,Z as i,a6 as B}from"./vue-vendor-BLj5oUxN.js";import"./vuetify-vendor-BJLvFpJU.js";import"./VList-7JITbm1I.js";import"./VDivider-BgotosWf.js";import"./VChip-DVNNT57J.js";import"./VSelectionControl-CCNJ0nGE.js";const M={__name:"OrdersView",setup(C){const{apiAuth:d}=k(),p=_(),n=h([]),f=[{title:"訂單編號",key:"_id"},{title:"日期",key:"createdAt"},{title:"商品",key:"cart",sortable:!1},{title:"金額",key:"price",sortable:!1,value:t=>t.cart.reduce((e,a)=>e+a.quantity*a.book.retailPrice,0)}];return w(async()=>{try{const{data:t}=await d.get("/orders");n.value.push(...t.result)}catch(t){const e=t?.response?.data?.message||"發生錯誤，請稍後再試";p({text:e,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}}),(t,e)=>(l(),g(V,null,{default:r(()=>[o(y,null,{default:r(()=>[o(c,{cols:"12"},{default:r(()=>e[0]||(e[0]=[u("h1",null,"訂單",-1)])),_:1,__:[0]}),o(c,{cols:"12"},{default:r(()=>[o(b,{items:n.value,headers:f},{"item.createdAt":r(({item:a})=>[B(i(new Date(a.createdAt).toLocaleString()),1)]),"item.cart":r(({item:a})=>[u("ul",null,[(l(!0),m(x,null,A(a.cart,s=>(l(),m("li",{key:s._id},i(s.book.title)+" * "+i(s.quantity),1))),128))])]),_:2},1032,["items"])]),_:1})]),_:1})]),_:1}))}};export{M as default};
