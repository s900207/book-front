var b=(h,_,i)=>new Promise((k,e)=>{var x=s=>{try{l(i.next(s))}catch(d){e(d)}},V=s=>{try{l(i.throw(s))}catch(d){e(d)}},l=s=>s.done?k(s.value):Promise.resolve(s.value).then(x,V);l((i=i.apply(h,_)).next())});import{u as S,a as T}from"./index-183e0965.js";import{O as D,P as F,j as L,r as P,K as p,G as r,H as t,Q as U,R as c,I as n,T as E,U as M,W as m,X as $,E as j,F as a,Y as B,u as y,Z as C,_ as A,$ as I,a0 as g,a1 as G,a2 as H,a3 as v,a4 as K,a5 as O,a6 as Q,a7 as N,a8 as R}from"./vue-vendor-5ccff89c.js";import"./vendor-913c4e2a.js";const q={__name:"FrontLayout",setup(h){const{apiAuth:_}=T(),i=$(),k=D(),e=S(),{mobile:x}=F(),V=L(()=>x.value),l=P(!1),s=L(()=>[{to:"/mybook",text:"我的最愛書籍",icon:"mdi-book-account",show:e.isLogin},{to:"/article",text:"文章",icon:"mdi-book",show:!1},{to:"/admin",text:"管理員管理",icon:"mdi-cog",show:e.isLogin&&e.isAdmin},{to:"/cart",text:"購物車",icon:"mdi-cart",show:!0},{to:"/orders",text:"訂單",icon:"mdi-list-box",show:e.isLogin},{to:"/register",text:"註冊",icon:"mdi-account-plus",show:!e.isLogin},{to:"/login",text:"登入",icon:"mdi-login",show:!e.isLogin}]),d=()=>b(this,null,function*(){var w,u;try{yield _.delete("/users/logout"),e.logout(),k({text:"登出成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),i.push("/")}catch(f){const o=((u=(w=f==null?void 0:f.response)==null?void 0:w.data)==null?void 0:u.message)||"發生錯誤，請稍後再試";k({text:o,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}});return(w,u)=>{const f=j("RouterView");return a(),p(m,null,[V.value?(a(),r(U,{key:0,modelValue:l.value,"onUpdate:modelValue":u[0]||(u[0]=o=>l.value=o),temporary:"",location:"right",style:{"background-color":"#4d4637",color:"#f6eee0","margin-top":"64px"}},{default:t(()=>[n(G,{nav:""},{default:t(()=>[(a(!0),p(m,null,B(s.value,o=>(a(),p(m,{key:o.to},[o.show?(a(),r(C,{key:0,to:o.to},{prepend:t(()=>[n(A,{icon:o.icon},null,8,["icon"])]),append:t(()=>[o.to==="/cart"?(a(),r(N,{key:0,color:"error",content:y(e).cart,inline:""},null,8,["content"])):c("",!0)]),default:t(()=>[n(I,null,{default:t(()=>[g(R(o.text),1)]),_:2},1024)]),_:2},1032,["to"])):c("",!0)],64))),128)),y(e).isLogin?(a(),r(C,{key:0,onClick:d},{prepend:t(()=>[n(A,{icon:"mdi-logout"})]),default:t(()=>[n(I,null,{default:t(()=>[g("登出")]),_:1})]),_:1})):c("",!0)]),_:1})]),_:1},8,["modelValue"])):c("",!0),n(E,{color:"#4d4637"},{default:t(()=>[n(H,{class:"d-flex align-center"},{default:t(()=>[n(v,{to:"/",active:!1},{default:t(()=>[n(K,{class:"text-h5"},{default:t(()=>[g("書評網")]),_:1})]),_:1}),n(O),V.value?(a(),r(Q,{key:0,onClick:u[1]||(u[1]=o=>l.value=!0)})):(a(),p(m,{key:1},[(a(!0),p(m,null,B(s.value,o=>(a(),p(m,{key:o.to},[o.show?(a(),r(v,{key:0,to:o.to,"prepend-icon":o.icon},{default:t(()=>[g(R(o.text),1),o.to==="/cart"?(a(),r(N,{key:0,color:"error",content:y(e).cart,floating:""},null,8,["content"])):c("",!0)]),_:2},1032,["to","prepend-icon"])):c("",!0)],64))),128)),y(e).isLogin?(a(),r(v,{key:0,"prepend-icon":"mdi-logout",onClick:d},{default:t(()=>[g("登出")]),_:1})):c("",!0)],64))]),_:1})]),_:1}),n(M,{style:{"background-color":"#f6eee0"}},{default:t(()=>[n(f)]),_:1})],64)}}};export{q as default};
