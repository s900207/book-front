var y=(t,o,e)=>new Promise((a,i)=>{var n=m=>{try{r(e.next(m))}catch(c){i(c)}},s=m=>{try{r(e.throw(m))}catch(c){i(c)}},r=m=>m.done?a(m.value):Promise.resolve(m.value).then(n,s);r((e=e.apply(t,o)).next())});import{z as R,A as I,r as u,j as B,B as O,C as P,S as Z,D as S,E as C,F as g,G as D,H as T,I as N,V as U,J as z,f as $,K as x,L as j,u as p,M as q,N as F}from"./vue-vendor-5ccff89c.js";import{c as W,s as J,a as w,d as K}from"./vendor-1de8772a.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function e(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(i){if(i.ep)return;i.ep=!0;const n=e(i);fetch(i.href,n)}})();if(typeof window!="undefined"){let t=function(){var o=document.body,e=document.getElementById("__svg__icons__dom__");e||(e=document.createElementNS("http://www.w3.org/2000/svg","svg"),e.style.position="absolute",e.style.width="0",e.style.height="0",e.id="__svg__icons__dom__",e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("xmlns:link","http://www.w3.org/1999/xlink")),e.innerHTML='<symbol  viewBox="0 0 24 24" id="icon-account-plus"><path d="M15 14c-2.67 0-8 1.33-8 4v2h16v-2c0-2.67-5.33-4-8-4m-9-4V7H4v3H1v2h3v3h2v-3h3v-2m6 2a4 4 0 0 0 4-4 4 4 0 0 0-4-4 4 4 0 0 0-4 4 4 4 0 0 0 4 4Z" /></symbol><symbol  viewBox="0 0 24 24" id="icon-account"><path d="M12 4a4 4 0 0 1 4 4 4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4Z" /></symbol><symbol  viewBox="0 0 24 24" id="icon-alert"><path d="M13 14h-2V9h2m0 9h-2v-2h2M1 21h22L12 2 1 21Z" /></symbol><symbol  viewBox="0 0 24 24" id="icon-book-account"><path d="M18 2h-6v7L9.5 7.5 7 9V2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2m-4 10a2 2 0 1 1-2 2 2 2 0 0 1 2-2m4 8h-8v-1c0-1.33 2.67-2 4-2s4 .67 4 2Z" /></symbol><symbol  viewBox="0 0 24 24" id="icon-book-arrow-up"><path d="M13 19c0 1.1.3 2.12.81 3H6c-1.11 0-2-.89-2-2V4a2 2 0 0 1 2-2h1v7l2.5-1.5L12 9V2h6a2 2 0 0 1 2 2v9.09c-.33-.05-.66-.09-1-.09-3.31 0-6 2.69-6 6m6-4-3 3h2v4h2v-4h2l-3-3Z" /></symbol><symbol  viewBox="0 0 24 24" id="icon-book-sync"><path d="M13 17.5c0 1.75.69 3.33 1.82 4.5H6c-1.11 0-2-.89-2-2V4a2 2 0 0 1 2-2h1v7l2.5-1.5L12 9V2h6a2 2 0 0 1 2 2v7.03c-.16-.03-.33-.03-.5-.03a6.5 6.5 0 0 0-6.5 6.5m6 2.5a2.5 2.5 0 0 1-2.5-2.5c0-.4.09-.78.26-1.12l-1.09-1.09c-.42.63-.67 1.39-.67 2.21 0 2.21 1.79 4 4 4V23l2.25-2.25L19 18.5V20m0-6.5V12l-2.25 2.25L19 16.5V15a2.5 2.5 0 0 1 2.5 2.5c0 .4-.09.78-.26 1.12l1.09 1.09c.42-.63.67-1.39.67-2.21 0-2.21-1.79-4-4-4Z" /></symbol><symbol  viewBox="0 0 24 24" id="icon-book"><path d="M18 22a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2h-6v7L9.5 7.5 7 9V2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12Z" /></symbol><symbol  viewBox="0 0 24 24" id="icon-cart"><path d="M17 18c-1.11 0-2 .89-2 2a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2M1 2v2h2l3.6 7.59-1.36 2.45c-.15.28-.24.61-.24.96a2 2 0 0 0 2 2h12v-2H7.42a.25.25 0 0 1-.25-.25c0-.05.01-.09.03-.12L8.1 13h7.45c.75 0 1.41-.42 1.75-1.03l3.58-6.47c.07-.16.12-.33.12-.5a1 1 0 0 0-1-1H5.21l-.94-2M7 18c-1.11 0-2 .89-2 2a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" /></symbol><symbol  viewBox="0 0 24 24" id="icon-chevron-down"><path d="M7.41 8.58 12 13.17l4.59-4.59L18 10l-6 6-6-6 1.41-1.42Z" /></symbol><symbol  viewBox="0 0 24 24" id="icon-chevron-up"><path d="M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6 1.41 1.41Z" /></symbol><symbol  viewBox="0 0 24 24" id="icon-cog"><path d="M12 15.5A3.5 3.5 0 0 1 8.5 12 3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5 3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97 0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1 0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66Z" /></symbol><symbol  viewBox="0 0 24 24" id="icon-delete"><path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6v12Z" /></symbol><symbol  viewBox="0 0 24 24" id="icon-email"><path d="m20 8-8 5-8-5V6l8 5 8-5m0-2H4c-1.11 0-2 .89-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2Z" /></symbol><symbol  viewBox="0 0 24 24" id="icon-heart-minus"><path d="M12 18c0 1 .25 1.92.67 2.74l-.67.61-1.45-1.32C5.4 15.36 2 12.27 2 8.5 2 5.41 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.08C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.41 22 8.5c0 1.43-.5 2.76-1.38 4.11-.79-.38-1.68-.61-2.62-.61-3.31 0-6 2.69-6 6m2-1v2h8v-2h-8Z" /></symbol><symbol  viewBox="0 0 24 24" id="icon-heart-plus"><path d="M12 18c0 1 .25 1.92.67 2.74l-.67.61-1.45-1.32C5.4 15.36 2 12.27 2 8.5 2 5.41 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.08C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.41 22 8.5c0 1.43-.5 2.76-1.38 4.11-.79-.38-1.68-.61-2.62-.61-3.31 0-6 2.69-6 6m7-4h-2v3h-3v2h3v3h2v-3h3v-2h-3v-3Z" /></symbol><symbol  viewBox="0 0 24 24" id="icon-home"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8h5Z" /></symbol><symbol  viewBox="0 0 24 24" id="icon-key-change"><path d="M7.5 2c2 0 3.6 1.2 4.2 3H21v3h-3v3h-3V8h-3.3c-.6 1.8-2.3 3-4.2 3C5 11 3 9 3 6.5S5 2 7.5 2m0 3C6.7 5 6 5.7 6 6.5S6.7 8 7.5 8 9 7.3 9 6.5 8.3 5 7.5 5m0 8c2 0 3.6 1.2 4.2 3H21v3h-1v3h-2v-3h-2v3h-3v-3h-1.3c-.6 1.8-2.3 3-4.2 3C5 22 3 20 3 17.5S5 13 7.5 13m0 3c-.8 0-1.5.7-1.5 1.5S6.7 19 7.5 19 9 18.3 9 17.5 8.3 16 7.5 16Z" /></symbol><symbol  viewBox="0 0 24 24" id="icon-key"><path d="M7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m5.6-4c-.8-2.3-3-4-5.6-4-3.3 0-6 2.7-6 6s2.7 6 6 6c2.6 0 4.8-1.7 5.6-4H16v4h4v-4h3v-4H12.6Z" /></symbol><symbol  viewBox="0 0 24 24" id="icon-list-box"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M7 7h2v2H7V7m0 4h2v2H7v-2m0 4h2v2H7v-2m10 2h-6v-2h6v2m0-4h-6v-2h6v2m0-4h-6V7h6v2Z" /></symbol><symbol  viewBox="0 0 24 24" id="icon-login"><path d="M11 7 9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5-5-5m9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8v14Z" /></symbol><symbol  viewBox="0 0 24 24" id="icon-logout"><path d="m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5M4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5Z" /></symbol><symbol  viewBox="0 0 24 24" id="icon-magnify"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z" /></symbol><symbol  viewBox="0 0 24 24" id="icon-menu"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z" /></symbol><symbol  viewBox="0 0 24 24" id="icon-minus"><path d="M19 13H5v-2h14v2Z" /></symbol><symbol  viewBox="0 0 24 24" id="icon-pencil"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z" /></symbol><symbol  viewBox="0 0 24 24" id="icon-plus"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2Z" /></symbol>',o.insertBefore(e,o.lastChild)};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",t):t()}const M=R({theme:{themes:{light:{colors:{primary:"#1867C0",secondary:"#5CBBF6"}}}},locale:{locale:"zhHant",messages:{zhHant:I}},icons:{defaultSet:"mdi",sets:{mdi:{component:"VIcon"}}}}),H=W();H.use(J);const G="modulepreload",Q=function(t){return"/book-front/"+t},A={},l=function(o,e,a){if(!e||e.length===0)return o();const i=document.getElementsByTagName("link");return Promise.all(e.map(n=>{if(n=Q(n),n in A)return;A[n]=!0;const s=n.endsWith(".css"),r=s?'[rel="stylesheet"]':"";if(!!a)for(let d=i.length-1;d>=0;d--){const v=i[d];if(v.href===n&&(!s||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${r}`))return;const c=document.createElement("link");if(c.rel=s?"stylesheet":G,s||(c.as="script",c.crossOrigin=""),c.href=n,document.head.appendChild(c),s)return new Promise((d,v)=>{c.addEventListener("load",d),c.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>o()).catch(n=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=n,window.dispatchEvent(s),!s.defaultPrevented)throw n})},b={USER:0,ADMIN:1},X=w.create({baseURL:"https://book-back-b23l.onrender.com"}),_=w.create({baseURL:"https://book-back-b23l.onrender.com"});_.interceptors.request.use(t=>{const o=L();return t.headers.Authorization="Bearer "+o.token,t});_.interceptors.response.use(t=>t,t=>{if(t.response&&t.response.data.message==="JWT 過期"&&t.config.url!=="/users/extend"){const o=L();return _.patch("/users/extend").then(({data:e})=>(o.token=e.result,t.config.headers.Authorization="Bearer "+o.token,w(t.config))).catch(()=>(o.logout(),Promise.reject(t)))}return Promise.reject(t)});const Y=()=>({api:X,apiAuth:_}),L=K("user",()=>{const{apiAuth:t}=Y(),o=u(""),e=u(""),a=u(""),i=u(""),n=u([]),s=u(0),r=u(b.USER),m=h=>{h.token&&(o.value=h.token),e.value=h.account,a.value=h.account,i.value=h.email,r.value=h.role,n.value=h.favorite,s.value=h.cart},c=B(()=>o.value.length>0),d=B(()=>r.value===b.ADMIN),v=()=>y(void 0,null,function*(){if(o.value.length!==0)try{const{data:h}=yield t.get("/users/me");m(h.result)}catch(h){V()}}),V=()=>{o.value="",e.value="",a.value="",i.value="",r.value=b.USER,s.value=0};return{token:o,account:e,email:i,cart:s,role:r,login:m,logout:V,isLogin:c,isAdmin:d,getProfile:v,favorite:n,nickname:a}},{persist:{key:"20240131",paths:["token"]}}),ee=[{path:"/",component:()=>l(()=>import("./FrontLayout-e7b0eed5.js"),["assets/FrontLayout-e7b0eed5.js","assets/vue-vendor-5ccff89c.js","assets/vue-vendor-c5226693.css","assets/vendor-1de8772a.js","assets/vendor-aec22861.css"]),children:[{path:"",name:"Home",component:()=>l(()=>import("./HomeView-0bad3235.js"),["assets/HomeView-0bad3235.js","assets/vue-vendor-5ccff89c.js","assets/vue-vendor-c5226693.css","assets/vendor-1de8772a.js","assets/vendor-aec22861.css","assets/HomeView-e3edd06e.css"]),meta:{title:"書評網",login:!1,admin:!1}},{path:"register",name:"Register",component:()=>l(()=>import("./RegisterView-86c317f1.js"),["assets/RegisterView-86c317f1.js","assets/vue-vendor-5ccff89c.js","assets/vue-vendor-c5226693.css","assets/vendor-1de8772a.js","assets/vendor-aec22861.css"]),meta:{title:"書評網 | 註冊",login:!1,admin:!1}},{path:"login",name:"Login",component:()=>l(()=>import("./LoginView-40ae1360.js"),["assets/LoginView-40ae1360.js","assets/vue-vendor-5ccff89c.js","assets/vue-vendor-c5226693.css","assets/vendor-1de8772a.js","assets/vendor-aec22861.css"]),meta:{title:"書評網 | 登入",login:!1,admin:!1}},{path:"books/:id",name:"Book",component:()=>l(()=>import("./BookView-53d1f8cc.js"),["assets/BookView-53d1f8cc.js","assets/vue-vendor-5ccff89c.js","assets/vue-vendor-c5226693.css","assets/vendor-1de8772a.js","assets/vendor-aec22861.css"]),meta:{title:"書評網 | 書籍",login:!1,admin:!1}},{path:"mybook",name:"Mybook",component:()=>l(()=>import("./MybookView-405a8711.js"),["assets/MybookView-405a8711.js","assets/vue-vendor-5ccff89c.js","assets/vue-vendor-c5226693.css","assets/vendor-1de8772a.js","assets/vendor-aec22861.css"]),meta:{title:"書評網 | 我的最愛書籍",login:!0,admin:!1}},{path:"cart",name:"Cart",component:()=>l(()=>import("./CartView-0a5b2aa3.js"),["assets/CartView-0a5b2aa3.js","assets/vue-vendor-5ccff89c.js","assets/vue-vendor-c5226693.css","assets/vendor-1de8772a.js","assets/vendor-aec22861.css"]),meta:{title:"書評網 | 購物車",login:!1,admin:!1}},{path:"orders",name:"Orders",component:()=>l(()=>import("./OrdersView-b6777486.js"),["assets/OrdersView-b6777486.js","assets/vue-vendor-5ccff89c.js","assets/vue-vendor-c5226693.css","assets/vendor-1de8772a.js","assets/vendor-aec22861.css"]),meta:{title:"購物網 | 訂單",login:!0,admin:!1}}]},{path:"/admin",component:()=>l(()=>import("./AdminLayout-ccbeddec.js"),["assets/AdminLayout-ccbeddec.js","assets/vue-vendor-5ccff89c.js","assets/vue-vendor-c5226693.css","assets/vendor-1de8772a.js","assets/vendor-aec22861.css"]),children:[{path:"",name:"AdminHome",component:()=>l(()=>import("./HomeView-e6f31242.js"),["assets/HomeView-e6f31242.js","assets/vue-vendor-5ccff89c.js","assets/vue-vendor-c5226693.css","assets/vendor-1de8772a.js","assets/vendor-aec22861.css"]),meta:{title:"購物網 | 管理",login:!0,admin:!0}},{path:"bookmanagement",name:"AdminBookmanagement",component:()=>l(()=>import("./BookmanagementView-4729f696.js"),["assets/BookmanagementView-4729f696.js","assets/vue-vendor-5ccff89c.js","assets/vue-vendor-c5226693.css","assets/vendor-1de8772a.js","assets/vendor-aec22861.css","assets/BookmanagementView-9f2a18c0.css"]),meta:{title:"購物網 | 書本管理",login:!0,admin:!0}},{path:"orders",name:"AdminOrders",component:()=>l(()=>import("./OrdersView-75cee2a2.js"),["assets/OrdersView-75cee2a2.js","assets/vue-vendor-5ccff89c.js","assets/vue-vendor-c5226693.css","assets/vendor-1de8772a.js","assets/vendor-aec22861.css"]),meta:{title:"購物網 | 訂單管理",login:!0,admin:!0}},{path:"import",name:"Import",component:()=>l(()=>import("./ImportView-c461fc87.js"),["assets/ImportView-c461fc87.js","assets/vue-vendor-5ccff89c.js","assets/vue-vendor-c5226693.css","assets/vendor-1de8772a.js","assets/vendor-aec22861.css"]),meta:{title:"書評網 | 引入書籍",login:!1,admin:!1}}]}],E=O({history:P("/book-front/"),routes:ee});E.afterEach((t,o)=>{document.title=t.meta.title});E.beforeEach((t,o,e)=>y(void 0,null,function*(){const a=L();o===Z&&(yield a.getProfile()),a.isLogin&&["/register","/login"].includes(t.path)?e("/"):t.meta.login&&!a.isLogin?e("/login"):t.meta.admin&&!a.isAdmin?e("/"):e()}));function te(t){t.use(M).use(S).use(H).use(E)}const k=(t,o)=>{const e=t.__vccOpts||t;for(const[a,i]of o)e[a]=i;return e},oe={};function ne(t,o){const e=C("router-view");return g(),D(U,null,{default:T(()=>[N(e)]),_:1})}const ie=k(oe,[["render",ne]]),se=["xlink:href","fill"],ae=z({__name:"svgIcon",props:{href:{type:String,default:"#icon-account"},fill:{type:String,default:"#icon-phone"},width:{type:String,default:"20px"},height:{type:String,default:"20px"}},setup(t){const o=t,{href:e,fill:a,width:i,height:n}=$(o);return(s,r)=>(g(),x("div",null,[(g(),x("svg",{style:j({width:p(i),height:p(n)})},[q("use",{"xlink:href":p(e),fill:p(a)},null,8,se)],4))]))}});const ce=k(ae,[["__scopeId","data-v-31b41c68"]]),f=F(ie);te(f);f.component("svgIcon",ce);f.mount("#app");f.use(M);export{k as _,Y as a,L as u};
