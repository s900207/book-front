import{u as I,a as D}from"./index-Mk3cYYfI.js";import{J as R,K as S,d as _,r as T,L as u,D as r,M as l,H as n,G as t,N as F,O as M,P,Q as i,R as U,E,F as e,T as $,U as x,W as w,X as v,Y as c,Z as b,_ as L,u as d,$ as B,a0 as G,a1 as m,a2 as H,a3 as J,a4 as K}from"./vue-vendor-DZ6ShR-l.js";import"./vendor-fvIX-KvJ.js";const Y={__name:"FrontLayout",setup(O){const{apiAuth:C}=D(),h=U(),f=R(),s=I(),{mobile:A}=S(),g=_(()=>A.value),p=T(!1),k=_(()=>[{to:"/mybook",text:"我的最愛書籍",icon:"mdi-book-account",show:s.isLogin},{to:"/article",text:"文章",icon:"mdi-book",show:!1},{to:"/admin",text:"管理員管理",icon:"mdi-cog",show:s.isLogin&&s.isAdmin},{to:"/cart",text:"購物車",icon:"mdi-cart",show:!0},{to:"/orders",text:"訂單",icon:"mdi-list-box",show:s.isLogin},{to:"/register",text:"註冊",icon:"mdi-account-plus",show:!s.isLogin},{to:"/login",text:"登入",icon:"mdi-login",show:!s.isLogin}]),V=async()=>{try{await C.delete("/users/logout"),s.logout(),f({text:"登出成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),h.push("/")}catch(y){const a=y?.response?.data?.message||"發生錯誤，請稍後再試";f({text:a,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}};return(y,a)=>{const N=E("RouterView");return e(),u(i,null,[g.value?(e(),r(F,{key:0,modelValue:p.value,"onUpdate:modelValue":a[0]||(a[0]=o=>p.value=o),temporary:"",location:"right",style:{"background-color":"#4d4637",color:"#f6eee0","margin-top":"64px"}},{default:t(()=>[n($,{nav:""},{default:t(()=>[(e(!0),u(i,null,x(k.value,o=>(e(),u(i,{key:o.to},[o.show?(e(),r(w,{key:0,to:o.to},{prepend:t(()=>[n(B,{icon:o.icon},null,8,["icon"])]),append:t(()=>[o.to==="/cart"?(e(),r(L,{key:0,color:"error",content:d(s).cart,inline:""},null,8,["content"])):l("",!0)]),default:t(()=>[n(v,null,{default:t(()=>[c(b(o.text),1)]),_:2},1024)]),_:2},1032,["to"])):l("",!0)],64))),128)),d(s).isLogin?(e(),r(w,{key:0,onClick:V},{prepend:t(()=>[n(B,{icon:"mdi-logout"})]),default:t(()=>[n(v,null,{default:t(()=>a[2]||(a[2]=[c("登出",-1)])),_:1,__:[2]})]),_:1})):l("",!0)]),_:1})]),_:1},8,["modelValue"])):l("",!0),n(M,{color:"#4d4637"},{default:t(()=>[n(G,{class:"d-flex align-center"},{default:t(()=>[n(m,{to:"/",active:!1},{default:t(()=>[n(H,{class:"text-h5"},{default:t(()=>a[3]||(a[3]=[c("書評網",-1)])),_:1,__:[3]})]),_:1}),n(J),g.value?(e(),r(K,{key:0,onClick:a[1]||(a[1]=o=>p.value=!0)})):(e(),u(i,{key:1},[(e(!0),u(i,null,x(k.value,o=>(e(),u(i,{key:o.to},[o.show?(e(),r(m,{key:0,to:o.to,"prepend-icon":o.icon},{default:t(()=>[c(b(o.text),1),o.to==="/cart"?(e(),r(L,{key:0,color:"error",content:d(s).cart,floating:""},null,8,["content"])):l("",!0)]),_:2},1032,["to","prepend-icon"])):l("",!0)],64))),128)),d(s).isLogin?(e(),r(m,{key:0,"prepend-icon":"mdi-logout",onClick:V},{default:t(()=>a[4]||(a[4]=[c("登出",-1)])),_:1,__:[4]})):l("",!0)],64))]),_:1})]),_:1}),n(P,{style:{"background-color":"#f6eee0"}},{default:t(()=>[n(N)]),_:1})],64)}}};export{Y as default};
